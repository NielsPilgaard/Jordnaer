@inject IJSRuntime JsRuntime
@inject NavigationManager Navigation


<MudGrid Justify="Justify.Center">
    @foreach (var post in SearchResult.Posts)
    {
        <MudItem xs="12">
	        <PostCardComponent PostItem="post"
	                          CurrentUserId="@CurrentUserId"
	                          OnPostDeleted="@OnPostDeleted"
	                          OnPostUpdated="@OnPostUpdated"/>
        </MudItem>
    }
</MudGrid>
<MudPagination Class="mt-5 d-flex justify-center"
               BoundaryCount="0"
               MiddleCount="3"
               UserAttributes="@(new Dictionary<string, object> {["title"] = $"Viser {Filter.PageSize} ud af {SearchResult.TotalCount} resultater."})"
               SelectedChanged="@SelectedPageChanged"
               Variant="Variant.Filled"
               Count="@((int)Math.Ceiling((double)SearchResult.TotalCount / Math.Max(1, Filter.PageSize)))"
               Selected="Filter.PageNumber" />

@code {
    [Parameter, EditorRequired]
    public required PostSearchFilter Filter { get; set; }

    [Parameter, EditorRequired]
    public required PostSearchResult SearchResult { get; set; }

    [Parameter, EditorRequired]
    public required string CurrentUserId { get; set; }

    [Parameter, EditorRequired]
    public EventCallback<int> SelectedPageChanged { get; set; }

    [Parameter, EditorRequired]
    public EventCallback OnPostDeleted { get; set; }

    [Parameter]
    public EventCallback OnPostUpdated { get; set; }
}
