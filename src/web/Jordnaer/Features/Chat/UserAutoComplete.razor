@using Jordnaer.Features.UserSearch
@using Jordnaer.Shared
@using MudBlazor

@attribute [Authorize]

@inject CurrentUser CurrentUser

@if (CurrentUser.Id is null)
{
	return;
}

<UserSearchAutocomplete CurrentUserId="@CurrentUser.Id"
                        UserSelected="@OnUserSelected"
                        Label="Start samtale med..."
                        ShowUsername="false"
                        AvatarSize="Size.Large"
                        Class="chat-user-search" />

@code {
    [Parameter]
    public EventCallback<IEnumerable<UserSlim>> SelectedUserChanged { get; set; }

    private async Task OnUserSelected(UserSlim? user)
    {
        if (user is not null)
        {
            await SelectedUserChanged.InvokeAsync([user]);
        }
    }
}
